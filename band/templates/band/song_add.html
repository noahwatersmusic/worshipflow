{% extends 'band/base.html' %}

{% block title %}Add Song - WorshipFlow{% endblock %}

{% block content %}
<h2>Add New Song</h2>

{% if messages %}
    <div style="margin-bottom: 20px;">
        {% for message in messages %}
            <div style="padding: 12px; margin-bottom: 10px; border-radius: 4px; {% if message.tags == 'error' %}background: #e74c3c; color: white;{% elif message.tags == 'warning' %}background: #f39c12; color: white;{% else %}background: #27ae60; color: white;{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
{% endif %}

<form method="post" action="{% url 'band:song_add' %}">
    {% csrf_token %}

    <div class="card">
        <h3>Song Information</h3>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
            <div class="filter-group">
                <label for="title">Title *</label>
                <input type="text" id="title" name="title" required style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
            </div>
            <div class="filter-group">
                <label for="artist">Artist</label>
                <input type="text" id="artist" name="artist" placeholder="e.g., Hillsong, Elevation Worship" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
            </div>
            <div class="filter-group">
                <label for="default_key">Default Key</label>
                <input type="text" id="default_key" name="default_key" placeholder="Leave blank to auto-detect" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
            </div>
            <div class="filter-group">
                <label for="tempo">Tempo</label>
                <select id="tempo" name="tempo" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
                    <option value="">Leave blank to auto-detect</option>
                    {% for value, label in tempo_choices %}
                    <option value="{{ value }}">{{ label }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="filter-group">
                <label for="bpm">BPM</label>
                <input type="number" id="bpm" name="bpm" placeholder="Leave blank to auto-detect" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
            </div>
            <div class="filter-group">
                <label for="length">Length</label>
                <input type="text" id="length" name="length" placeholder="e.g., 4:48" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
            </div>
            <div class="filter-group">
                <label for="style">Style</label>
                <input type="text" id="style" name="style" placeholder="e.g., Contemporary, Hymn, Gospel" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
            </div>
            <div class="filter-group">
                <label for="comfort_level">Comfort Level</label>
                <input type="text" id="comfort_level" name="comfort_level" placeholder="e.g., High, Medium, Learning" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;">
            </div>
        </div>
    </div>

    <div class="card">
        <h3>Additional Details</h3>
        <div style="margin-top: 15px;">
            <div class="filter-group" style="margin-bottom: 15px;">
                <label for="arrangement_notes">Arrangement Notes</label>
                <textarea id="arrangement_notes" name="arrangement_notes" rows="3" placeholder="Notes about song arrangement, structure, etc." style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;"></textarea>
            </div>
            <div class="filter-group">
                <label for="notes">Notes</label>
                <textarea id="notes" name="notes" rows="3" style="padding: 8px 12px; border: 1px solid #ddd; border-radius: 4px; width: 100%;"></textarea>
            </div>
        </div>
    </div>

    <div class="card">
        <div style="margin-top: 10px;">
            <button type="submit" style="background: #27ae60;">Add Song</button>
            <a href="{% url 'band:songs_list' %}" class="btn" style="background: #95a5a6; margin-left: 10px;">Cancel</a>
        </div>
    </div>
</form>

{% endblock %}
