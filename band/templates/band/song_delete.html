{% extends 'band/base.html' %}

{% block title %}Delete {{ song.title }} - WorshipFlow{% endblock %}

{% block content %}
<h2>Delete Song</h2>

<div class="card" style="border-left: 4px solid #e74c3c;">
    <h3 style="color: #e74c3c;">Warning: This action cannot be undone</h3>
    <p>You are about to delete the following song:</p>

    <div style="background: #f8f9fa; padding: 15px; border-radius: 4px; margin: 15px 0;">
        <p><strong>Title:</strong> {{ song.title }}</p>
        <p><strong>Song ID:</strong> {{ song.song_id }}</p>
        {% if song.artist %}
        <p><strong>Artist:</strong> {{ song.artist }}</p>
        {% endif %}
        <p><strong>Default Key:</strong> {{ song.default_key }}</p>
    </div>
</div>

{% if person_preferences_count > 0 or service_songs_count > 0 %}
<div class="card" style="border-left: 4px solid #f39c12;">
    <h3 style="color: #f39c12;">Related Data Will Be Deleted</h3>
    <p>Deleting this song will also delete the following:</p>
    <ul style="margin: 15px 0; padding-left: 20px;">
        {% if person_preferences_count > 0 %}
        <li><strong>{{ person_preferences_count }}</strong> person song preference(s)</li>
        {% endif %}
        {% if service_songs_count > 0 %}
        <li><strong>{{ service_songs_count }}</strong> service song assignment(s)</li>
        {% endif %}
    </ul>
</div>
{% endif %}

<div class="card">
    <h3>Confirm Deletion</h3>
    <p>Are you sure you want to permanently delete <strong>"{{ song.title }}"</strong>?</p>

    <form method="post" action="{% url 'band:song_delete_confirm' song.song_id %}" style="margin-top: 20px;">
        {% csrf_token %}
        <button type="submit" style="background: #e74c3c;">Yes, Delete This Song</button>
        <a href="{% url 'band:song_detail' song.song_id %}" class="btn" style="background: #95a5a6; margin-left: 10px;">Cancel</a>
    </form>
</div>

{% endblock %}
